(function(e){function t(t){for(var r,o,c=t[0],u=t[1],s=t[2],l=0,p=[];l<c.length;l++)o=c[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==a[u]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/vue-barcode-reader/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var d=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"0493":function(e,t,n){"use strict";n("6259")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("StreamBarcodeReader")],1)},i=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"scanner-container"},[n("div",{staticClass:"camera"},[n("video",{ref:"scanner",attrs:{poster:"data:image/gif,AAAA",autoplay:"",playsinline:"",muted:"",id:"video"},domProps:{muted:!0}}),n("div",{staticClass:"laser center"}),n("div",{staticClass:"laser left"}),n("div",{staticClass:"laser right"})])]),n("button",{staticClass:"button",on:{click:function(t){return e.onSnap()}}},[e._v(" snap")]),n("input",{attrs:{type:"text"},domProps:{value:e.pattenStr}}),e._v(" "+e._s(e.msgs)+" "),n("hr")])},c=[],u=n("1da1"),s=(n("d81d"),n("ac1f"),n("1276"),n("498a"),n("a9e3d"),n("159b"),n("a630"),n("3ca3"),n("96cf"),n("b85c")),d=n("3835"),l=n("d4ec"),p=n("bee2"),f=n("ade3"),v=(n("a15b"),n("d3b7"),n("25f0"),n("4ec9"),n("ddb0"),n("4de4"),n("b0c0"),n("224f")),h=function(){function e(){Object(l["a"])(this,e),Object(f["a"])(this,"reader",new v["QRCodeReader"]),Object(f["a"])(this,"captureCanvasContext",void 0),Object(f["a"])(this,"captureCanvas",void 0),Object(f["a"])(this,"isVertical",void 0)}return Object(p["a"])(e,[{key:"createCaptureCanvas",value:function(e,t){if("undefined"===typeof document)return null;var n,r,a=document.createElement("canvas");return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),this.isVertical=r>n,n*=t,a.style.width=n+"px",a.style.height=r+"px",a.width=n,a.height=r,a}},{key:"getCaptureCanvas",value:function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}},{key:"getCaptureCanvasContext",value:function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),n=t.getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}},{key:"drawImageOnCanvas",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,50],n=(t[1]-t[0])/100,r=this.createCaptureCanvas(e,n),a=r.width,i=r.height,o=e.videoWidth*t[0]/100,c=r.getContext("2d");return c.drawImage(e,o,0,a,i,0,0,a,i),r}},{key:"createBinaryBitmap",value:function(e){var t=new v["HTMLCanvasElementLuminanceSource"](e),n=new v["HybridBinarizer"](t);return new v["BinaryBitmap"](n)}},{key:"getData",value:function(e){var t=Array.from(e.getRawBytes().subarray(0,2)).map((function(e){return e.toString(16)})).join("").split(""),n=Object(d["a"])(t,3),r=n[0],a=n[1],i=n[2];console.log(r,a,i);var o="3"===r,c=o?parseInt(i,16)+1:void 0,u=o?parseInt(a,16):void 0,s=e.getResultMetadata();return{isSplitQRCode:o,splitCounts:c,splitIndex:u,parity:void 0|s.get(v["ResultMetadataType"].STRUCTURED_APPEND_PARITY),text:e.getText()}}},{key:"drawPoint",value:function(e,t){var n=t.x,r=t.y;e.fillRect(n-10,r-10,20,20)}},{key:"drawResult",value:function(e,t){if(e){if(t){var n=e.getContext("2d");n.beginPath(),n.fillStyle="#FF0000";var r,a=Object(s["a"])(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.drawPoint(n,i)}}catch(c){a.e(c)}finally{a.f()}}var o=document.createElement("img");o.style.marginRight="0.3rem",o.style.width="30vw",o.src=e.toDataURL(),document.body.appendChild(o)}}},{key:"dd",value:function(e){try{var t=new Map;return t.set(v["DecodeHintType"].TRY_HARDER,!0),t.set(v["DecodeHintType"].ALLOWED_LENGTHS,!0),t.set(v["DecodeHintType"].POSSIBLE_FORMATS,[v["BarcodeFormat"].QR_CODE]),this.reader.decode(this.createBinaryBitmap(e),t)}catch(n){console.log(n)}}},{key:"decodeImage",value:function(e,t){var n,r=[],a=Object(s["a"])(t);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=this.drawImageOnCanvas(e,i),c=this.dd(o);r.push(c),this.drawResult(o,null===c||void 0===c?void 0:c.getResultPoints())}}catch(u){a.e(u)}finally{a.f()}return r.filter((function(e){return!!e}))}},{key:"decode",value:function(e,t){try{var n=this.decodeImage(e,t);return n.map(this.getData)}catch(r){"NotFoundException"!==r.name&&console.error(r)}}}]),e}(),m=new h,g={name:"stream-barcode-reader",data:function(){return{msgs:"",pattenStr:"0-50;  50-100;   25-75;",histories:[],stream:null}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia({video:{width:1920,height:1080,facingMode:{ideal:"environment"}}});case 2:e.stream=t.sent,e.$refs.scanner.srcObject=e.stream;case 4:case"end":return t.stop()}}),t)})))()},computed:{pattern:function(){return this.pattenStr.split(";").map((function(e){return e.trim().split("-").map((function(e){return Number(e)}))}))}},methods:{onSnap:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Array.from(document.querySelectorAll("img")).forEach((function(e){return e.remove()})),console.log(e.pattern),n=m.decode(e.$refs.scanner,e.pattern),e.msgs=n.map((function(e){return null===e||void 0===e?void 0:e.text})),console.log(n);case 5:case"end":return t.stop()}}),t)})))()}}},y=g,b=(n("0493"),n("2877")),C=Object(b["a"])(y,o,c,!1,null,"3d8b779a",null),w=C.exports,O={name:"App",components:{StreamBarcodeReader:w}},x=O,R=(n("034f"),Object(b["a"])(x,a,i,!1,null,null,null)),j=R.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(j)}}).$mount("#app")},6259:function(e,t,n){},"85ec":function(e,t,n){}});
//# sourceMappingURL=app.e5c13e5c.js.map